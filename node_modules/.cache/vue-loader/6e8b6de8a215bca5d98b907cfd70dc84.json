{"remainingRequest":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/RichText/index.vue?vue&type=template&id=8e3690c8&ts=true","dependencies":[{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/RichText/index.vue","mtime":1711631806706},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/cache-loader/dist/cjs.js","mtime":1711627298830},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/babel-loader/lib/index.js","mtime":1711627299187},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/ts-loader/index.js","mtime":1711627299230},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1711627299435},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/cache-loader/dist/cjs.js","mtime":1711627298830},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/vue-loader-v16/dist/index.js","mtime":1711627299184}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICA8ZGl2IGNsYXNzPSJyaWNoLXRleHQiPgogICAgICAgIDxxdWlsbC1lZGl0b3IKICAgICAgICAgICAgcmVmPSJteVF1aWxsRWRpdG9yIgogICAgICAgICAgICBjb250ZW50LXR5cGU9Imh0bWwiCiAgICAgICAgICAgIDpjb250ZW50PSJzdGF0ZS50ZXh0IgogICAgICAgICAgICA6b3B0aW9ucz0iZWRpdG9yT3B0aW9uIgogICAgICAgICAgICBAdGV4dC1jaGFuZ2U9ImNoYW5nZSIKICAgICAgICAvPgogICAgPC9kaXY+Cg=="},{"version":3,"sources":["/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/RichText/index.vue"],"names":[],"mappings":";IAUI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC;IACL,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/RichText/index.vue","sourceRoot":"","sourcesContent":["<!--\n * @Author: huangwensong\n * @Date: 2024-03-24 14:20:27\n * @LastEditors: suqi04\n * @LastEditTime: 2024-03-28 21:16:37\n * @FilePath: /final-phrase-demo/src/components/RichText/index.vue\n * @Description:\n-->\n<!--  -->\n<template>\n    <div class=\"rich-text\">\n        <quill-editor\n            ref=\"myQuillEditor\"\n            content-type=\"html\"\n            :content=\"state.text\"\n            :options=\"editorOption\"\n            @text-change=\"change\"\n        />\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n    reactive,\n    toRefs,\n    onMounted,\n    ref,\n    defineProps,\n    defineEmits,\n    toRaw\n} from 'vue';\nimport { QuillEditor, Quill } from '@vueup/vue-quill';\nimport { downLoadWordDoc } from '@/utils';\nimport { useRouter } from 'vue-router';\nimport PlayInfo from '@/store/palyInfo';\nconst { nowTitle } = PlayInfo();\n\nconst router = useRouter();\n//@ts-ignore\n// import * as  from 'quill';\nconst props = defineProps({\n    content: {\n        type: String,\n        default: ''\n    }\n});\n\nconst state = reactive({\n    text: props.content\n});\nvar Bold = Quill.import('formats/bold');\nBold.tagName = 'B'; // Quill uses <strong> by default\nQuill.register(Bold, true);\n\nconst emit = defineEmits(['saveRich']);\nconst downSvg =\n    '<svg t=\"1711624986970\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2888\"><path d=\"M811.323077 590.769231v220.553846H212.676923v-220.553846H118.153846v315.076923h787.692308v-315.076923z\" fill=\"#333333\" p-id=\"2889\"></path><path d=\"M512 712.861538l118.153846-122.092307h-70.892308V118.153846h-94.523076v472.615385h-70.892308z\" fill=\"#333333\" p-id=\"2890\"></path></svg>';\nconst saveSvg =\n    '<svg t=\"1711618157084\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1732\"><path d=\"M338.1 341.4h229.1c20.7 0 37.7-17 37.7-37.7V129.5c0-20.7-17-37.7-37.7-37.7H338.1c-20.7 0-37.7 17-37.7 37.7v174.1c0 20.8 17 37.8 37.7 37.8z\" fill=\"#6D6E70\" p-id=\"1733\"></path><path d=\"M772 68.2h-82.5v292.1c0 12.3-10 22.3-22.3 22.3H232.4c-12.3 0-22.3-10-22.3-22.4l1.8-292h-69.2c-33.4 0-60.5 27.1-60.5 60.5V892c0 33.4 27.1 60.5 60.5 60.5h737.7c33.4 0 60.5-27.1 60.5-60.5V258.8L772 68.2z m57 765.5c0 17.7-14.5 32.3-32.3 32.3H240.3c-17.7 0-32.3-14.5-32.3-32.3V501.4c0-17.7 14.5-32.3 32.3-32.3h556.4c17.7 0 32.3 14.5 32.3 32.3v332.3z\" fill=\"#6D6E70\" p-id=\"1734\"></path><path d=\"M723.7 585.7H302.5c-16 0-29.1 13.1-29.1 29.1s13.1 29.1 29.1 29.1h421.2c16 0 29.1-13.1 29.1-29.1s-13.1-29.1-29.1-29.1zM723.7 737H302.5c-16 0-29.1 13.1-29.1 29.1s13.1 29.1 29.1 29.1h421.2c16 0 29.1-13.1 29.1-29.1S739.7 737 723.7 737z\" fill=\"#6D6E70\" p-id=\"1735\"></path></svg>';\nconst myQuillEditor = ref();\nlet editorOption = {\n    modules: {\n        toolbar: {\n            container: [\n                ['finalPhraseSave'],\n                [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strike',\n                    { color: [] },\n                    { background: [] } // 字体颜色、字体背景颜色\n                ], // 加粗 斜体 下划线 删除线\n                // [{ align: [] }], // 对齐方式\n                [{ header: [1, 2, 3, 4, 5, 6, false] }], // 标题\n                // [{ direction: 'ltl' }], // 文本方向\n                // [{ direction: 'rtl' }], // 文本方向\n                // [{ indent: '-1' }, { indent: '+1' }], // 缩进\n                // [{ list: 'ordered' }, { list: 'bullet' }], // 有序、无序列表\n                // [{ script: 'sub' }, { script: 'super' }], // 上标/下标\n                // ['blockquote', 'code-block'], // 引用  代码块\n                ['clean'] // 清除文本格式\n                // ['link', 'image', 'video'] // 链接、图片、视频\n            ],\n            handlers: {\n                shadeBox: null,\n                that: this,\n                finalPhraseSave: function () {\n                    const htmlDom = `<h2>${nowTitle.value}</h2>${toRaw(\n                        myQuillEditor.value\n                    ).getHTML()}`;\n\n                    downLoadWordDoc(htmlDom, nowTitle.value);\n                }\n            }\n        }\n        // toolbar: false\n    }\n};\n\nfunction change(val: any) {\n    // console.log(toRaw(myQuillEditor.value).getHTML());\n    // console.log(state.text);\n    // convertClassesToStyles(document.querySelector('.ql-editor'))\n    emit('saveRich', toRaw(myQuillEditor.value).getHTML());\n}\n\nconst nextHandle = () => {\n    setTimeout(() => {\n        router.push({\n            path: '/showPlay',\n            query: {\n                showScript: 'read'\n            }\n        });\n    }, 100);\n};\nonMounted(() => {\n    console.log(toRaw(myQuillEditor.value));\n    console.log(toRaw(myQuillEditor.value).getQuill());\n    const quillSaveBtnDom = document.querySelector('.ql-finalPhraseSave');\n    // @ts-ignore\n    quillSaveBtnDom.innerHTML = downSvg;\n});\n</script>\n<style lang=\"less\">\n.rich-text {\n    width: 100%;\n    height: calc(100% - 102px);\n}\n</style>\n<style lang=\"less\">\n.ql-editor p {\n    font-size: 14px;\n}\n.editor {\n    line-height: normal !important;\n    height: 500px !important;\n    width: 100vw;\n}\n\n.ql-container {\n    min-height: 500px !important;\n}\n\n.ql-snow .ql-tooltip[data-mode='link']::before {\n    content: '请输入链接地址:' !important;\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n    border-right: 0px !important;\n    content: '保存' !important;\n    padding-right: 0px !important;\n}\n\n.ql-snow .ql-tooltip[data-mode='video']::before {\n    content: '请输入视频地址:' !important;\n}\n\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\n    content: '14px' !important;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {\n    content: '10px' !important;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {\n    content: '18px' !important;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {\n    content: '32px' !important;\n}\n\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\n    content: '文本' !important;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {\n    content: '标题1' !important;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {\n    content: '标题2' !important;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {\n    content: '标题3' !important;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {\n    content: '标题4' !important;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {\n    content: '标题5' !important;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {\n    content: '标题6' !important;\n}\n\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\n    content: '标准字体' !important;\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {\n    content: '衬线字体' !important;\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {\n    content: '等宽字体' !important;\n}\n</style>\n"]}]}