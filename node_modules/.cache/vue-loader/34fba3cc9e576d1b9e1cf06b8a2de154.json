{"remainingRequest":"/Users/bytedance/code/final-phrase-demo/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/bytedance/code/final-phrase-demo/src/views/edit-play/AllContent.vue?vue&type=template&id=1781da6c&scoped=true&ts=true","dependencies":[{"path":"/Users/bytedance/code/final-phrase-demo/src/views/edit-play/AllContent.vue","mtime":1720003920035},{"path":"/Users/bytedance/code/final-phrase-demo/node_modules/cache-loader/dist/cjs.js","mtime":1720003915936},{"path":"/Users/bytedance/code/final-phrase-demo/node_modules/babel-loader/lib/index.js","mtime":1720003915886},{"path":"/Users/bytedance/code/final-phrase-demo/node_modules/ts-loader/index.js","mtime":1720003919451},{"path":"/Users/bytedance/code/final-phrase-demo/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1720003919761},{"path":"/Users/bytedance/code/final-phrase-demo/node_modules/cache-loader/dist/cjs.js","mtime":1720003915936},{"path":"/Users/bytedance/code/final-phrase-demo/node_modules/vue-loader-v16/dist/index.js","mtime":1720003919760}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICA8ZGl2IGNsYXNzPSJjb250ZW50Ij4KICAgICAgICA8VGl0bGUgOmluaXRpYWwtdGV4dD0idGl0bGUiPjwvVGl0bGU+CiAgICAgICAgPFJpY2hUZXh0CiAgICAgICAgICAgIDprZXk9InRleHQiCiAgICAgICAgICAgIDpjb250ZW50PSJ0ZXh0IgogICAgICAgICAgICBAc2F2ZVJpY2g9InNhdmVJbmZvIgogICAgICAgID48L1JpY2hUZXh0PgogICAgICAgIDwhLS0gPGRpdiBjbGFzcz0iYnRuLWdyb3VwIj4KICAgICAgICAgICAgPGVsLWJ1dHRvbgogICAgICAgICAgICAgICAgdHlwZT0icHJpbWFyeSIKICAgICAgICAgICAgICAgIEBjbGljaz0ibmV4dEhhbmRsZSIKICAgICAgICAgICAgICAgIGxpbmsKICAgICAgICAgICAgPuWujOaIkDwvZWwtYnV0dG9uPgogICAgICAgIDwvZGl2PiAtLT4KICAgIDwvZGl2Pgo="},{"version":3,"sources":["/Users/bytedance/code/final-phrase-demo/src/views/edit-play/AllContent.vue"],"names":[],"mappings":";IAUI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACX,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/bytedance/code/final-phrase-demo/src/views/edit-play/AllContent.vue","sourceRoot":"","sourcesContent":["<!--\n * @Author: 777\n * @Date: 2024-03-25 19:43:23\n * @LastEditors: 777\n * @LastEditTime: 2024-04-14 22:06:48\n * @FilePath: /final-phrase-demo/src/views/edit-play/AllContent.vue\n * @Description: \n-->\n<!--  -->\n<template>\n    <div class=\"content\">\n        <Title :initial-text=\"title\"></Title>\n        <RichText\n            :key=\"text\"\n            :content=\"text\"\n            @saveRich=\"saveInfo\"\n        ></RichText>\n        <!-- <div class=\"btn-group\">\n            <el-button\n                type=\"primary\"\n                @click=\"nextHandle\"\n                link\n            >完成</el-button>\n        </div> -->\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, toRefs, onMounted } from 'vue';\nimport RichText from '@/components/RichText/index.vue';\nimport PlayInfo from '../../store/palyInfo';\nimport Title from '@/components/title.vue';\nimport { textHandle } from '@/utils/index';\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\n\nconst { state, nowTitle } = PlayInfo();\n\nconst { title, content }: any = toRefs(state);\n\nnowTitle.value = title.value;\nconst text = ref('');\n\nonMounted(() => {\n    // console.log(content.value);\n    content.value.map((item: any) => {\n        text.value += `<h3>${item.sessionTitle}</h3>${textHandle(item.text)}`;\n    });\n});\n\nconst saveInfo = (text: any) => {\n    // console.log((text));\n    \n    // 使用正则表达式分割字符串\n    const htmlString = textHandle(text);\n    let regex = /<h3>(.*?)<\\/h3>/g;\n    let groups = htmlString.split(regex).filter(str => str.trim() !== '');\n\n    let processedData = [];\n    for (let i = 0; i < groups.length; i += 2) {\n        processedData.push({\n            title: groups[i],\n            text: '<div>' + groups[i + 1] + '</div>'\n        });\n    }\n\n    for (let i = 0; i < groups.length; i++) {\n        if (processedData[i]) {\n            content.value[i].sessionTitle = processedData[i].title;\n            content.value[i].text = processedData[i].text;\n        }\n    }\n};\n\nconst nextHandle = () => {\n    setTimeout(() => {\n        router.push({\n            path: '/showPlay',\n            query: {\n                showScript: 'read'\n            }\n        });\n    }, 100);\n};\n</script>\n<style lang=\"less\" scoped>\n.content {\n    height: 100%;\n}\n.btn-group {\n    background-color: #f5faf6;\n    position: fixed;\n    bottom: 0;\n    padding: 30px 0;\n    width: 100%;\n    display: flex;\n    height: 30px;\n    line-height: 30px;\n    align-items: center;\n    justify-content: space-evenly;\n    .el-button {\n        font-size: 16px;\n    }\n}\n</style>\n"]}]}