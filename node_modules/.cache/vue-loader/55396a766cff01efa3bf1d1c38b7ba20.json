{"remainingRequest":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/title.vue?vue&type=style&index=0&id=0ff1fb10&lang=less&scoped=true","dependencies":[{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/title.vue","mtime":1713145413266},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/css-loader/dist/cjs.js","mtime":1711627299054},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1711627299426},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/postcss-loader/src/index.js","mtime":1711627299184},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/less-loader/dist/cjs.js","mtime":1711627299124},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/cache-loader/dist/cjs.js","mtime":1711627298830},{"path":"/Users/suqi04/baidu/baidu/final-phrase-demo/node_modules/vue-loader-v16/dist/index.js","mtime":1711627299184}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lZGl0LXRpdGxlIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgZm9udC1zaXplOiAzMHB4OwogICAgaGVpZ2h0OiA2MHB4OwogICAgcGFkZGluZzogMTBweDsKICAgIC8vIGZvbnQtd2VpZ2h0OiBib2xkOzsKICAgIC5lZGl0aW5nIHsKICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgICAgICAgLy8gd2lkdGg6IDQwMHB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgfQogICAgLmVkaXRhYmxlLXRleHRhcmVhIHsKICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICByZXNpemU6IG5vbmU7CiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7CiAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICAgICAgY29sb3I6IGluaGVyaXQ7CiAgICAgICAgcGFkZGluZzogMDsKICAgICAgICBoZWlnaHQ6IDYwcHg7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICB9CgogICAgLmVkaXRhYmxlLXRleHRhcmVhOjpwbGFjZWhvbGRlciB7CiAgICAgICAgY29sb3I6IHRyYW5zcGFyZW50OwogICAgfQoKICAgIC8qIEN1c3RvbWl6ZSBjdXJzb3IgKi8KICAgIC5lZGl0YWJsZS10ZXh0YXJlYTpmb2N1cyB7CiAgICAgICAgY3Vyc29yOiB0ZXh0OwogICAgfQp9Cg=="},{"version":3,"sources":["/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/title.vue"],"names":[],"mappings":"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","file":"/Users/suqi04/baidu/baidu/final-phrase-demo/src/components/title.vue","sourceRoot":"","sourcesContent":["<!--\n * @Author: huangwensong\n * @Date: 2024-03-24 19:36:36\n * @LastEditors: suqi04\n * @LastEditTime: 2024-04-15 09:43:33\n * @FilePath: /final-phrase-demo/src/components/title.vue\n * @Description: \n-->\n<!--  -->\n<template>\n    <div class=\"edit-title\">\n        <div class=\"editing\">\n            <!-- <input\n                v-if=\"editing\"\n                v-model=\"editedText\"\n                class=\"editable-textarea\"\n                contenteditable=\"true\"\n                ref=\"input\"\n                autosize\n            />\n            <div v-else>{{ originalText }}</div> -->\n            <div>{{ originalText }}</div>\n        </div>\n\n        <div\n            v-if=\"$route.path === '/editPlay'\"\n            class=\"control\"\n        >\n            <el-button\n                v-if=\"$route.query.type && $route.query.type === '2'\"\n                type=\"primary\"\n                :disabled=\"parseInt($route.query.index || 0, 10) <= 0\"\n                @click=\"upHandle\"\n            >\n                上一场\n            </el-button>\n            <el-button\n                type=\"primary\"\n                @click=\"drawer = true\"\n            > 概述 </el-button>\n            <el-button\n                type=\"primary\"\n                @click=\"saveInfo(1)\"\n            > 预览 </el-button>\n            <el-button\n                type=\"primary\"\n                @click=\"saveInfo\"\n            > 保存 </el-button>\n            <el-button\n                v-if=\"$route.query.type && $route.query.type === '2'\"\n                type=\"primary\"\n                :disabled=\"\n                    parseInt($route.query.index || 0, 10) >= content.length - 1\n                \"\n                @click=\"nextHandle\"\n            >\n                下一场\n            </el-button>\n        </div>\n        <!-- <el-button type=\"text\" @click=\"toggleEdit\">{{\n            editing ? '保存' : '编辑'\n        }}</el-button> -->\n        <el-drawer\n            v-model=\"drawer\"\n            :with-header=\"false\"\n        >\n            <span v-html=\"jjInfo\" :contenteditable=\"false\"></span>\n        </el-drawer>\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n    ref,\n    defineProps,\n    defineEmits,\n    watch,\n    toRefs,\n    onBeforeMount\n} from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport PlayInfo from '@/store/palyInfo';\nconst { state, Prequel } = PlayInfo();\n\nconst { content }: any = toRefs(state);\n\nconst router = useRouter();\nconst $route = useRoute();\nconst index = ref(0);\n\nconst jjInfo = ref('');\nconst drawer = ref(false);\n\nPrequel.content.forEach(item => {\n    jjInfo.value += `<h3 class=\"text-content-title\" style=\"margin:20px 0 10px 20px\">${\n        item.sessionTitle\n    }</h3>${removeInputTags(item.text)}`;\n});\n\nfunction removeInputTags(htmlString: string) {\n    // 定义匹配<input>标签的正则表达式\n    var inputPattern = /<input[^>]*>/g;\n    // 使用replace()方法替换匹配到的<input>标签为空字符串\n    var result = htmlString.replace(inputPattern, '');\n    return result;\n}\nwatch(\n    $route,\n    val => {\n        console.log(content.value);\n\n        if (parseInt(val.query.index || 1, 10) > content.value.length - 1) {\n            router.push({\n                query: {\n                    type: 2,\n                    index: content.value.length - 1\n                }\n            });\n        }\n        index.value = parseInt(val.query.index || 0, 10);\n    },\n    {\n        deep: true\n    }\n);\n\nconst props = defineProps({\n    initialText: {\n        type: String,\n        required: true\n    }\n});\n\nconst emit = defineEmits(['textSaved']);\n\nconst originalText = ref(props.initialText);\nconst editedText = ref('');\nconst input = ref('input');\nconst editing = ref(false);\n\nconst toggleEdit = () => {\n    if (editing.value) {\n        // Save the edited text\n        originalText.value = editedText.value;\n    } else {\n        // Switch to edit mode\n        editedText.value = originalText.value;\n        console.log('cs');\n        // Focus on the textarea when entering edit mode\n        setTimeout(() => {\n            const inputElement = document.querySelector('.editable-textarea');\n            inputElement.focus();\n        }, 0);\n    }\n    editing.value = !editing.value;\n};\n\nconst upHandle = () => {\n    console.log(index.value + 1);\n    if (index.value > 0) {\n        router.push({\n            query: {\n                type: 2,\n                index: index.value - 1\n            }\n        });\n    }\n};\nconst nextHandle = () => {\n    console.log(index.value + 1);\n    if (index.value + 1 < content.value.length) {\n        router.push({\n            query: {\n                type: 2,\n                index: index.value + 1\n            }\n        });\n    }\n};\nconst saveInfo = (type = 0) => {\n    setTimeout(() => {\n        router.push({\n            path: '/showPlay',\n            query: {\n                showScript: 'read',\n                preview: type\n            }\n        });\n    }, 100);\n};\n// Emit an event when the editing mode changes\n// const emitEditModeChange = () => {\n//     emit('edit-mode-change', editing.value);\n// };\n\n// Emit an event when the text is saved\nconst emitTextSaved = () => {\n    emit('textSaved', originalText.value);\n};\nonBeforeMount(() => {\n    console.log($route.query.index);\n\n    index.value = parseInt($route.query.index || 2, 10);\n});\n</script>\n<style lang=\"less\" scoped>\n.edit-title {\n    display: flex;\n    text-align: center;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 30px;\n    height: 60px;\n    padding: 10px;\n    // font-weight: bold;;\n    .editing {\n        margin-right: 10px;\n        // width: 400px;\n        text-align: left;\n        height: 100%;\n        font-weight: bold;\n    }\n    .editable-textarea {\n        border: none;\n        outline: none;\n        resize: none;\n        overflow: hidden;\n        background: transparent;\n        font-size: inherit;\n        font-family: inherit;\n        color: inherit;\n        padding: 0;\n        height: 60px;\n        margin: 0;\n        box-sizing: border-box;\n        line-height: inherit;\n    }\n\n    .editable-textarea::placeholder {\n        color: transparent;\n    }\n\n    /* Customize cursor */\n    .editable-textarea:focus {\n        cursor: text;\n    }\n}\n</style>\n"]}]}